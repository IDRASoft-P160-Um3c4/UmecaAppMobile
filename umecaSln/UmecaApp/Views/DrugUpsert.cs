#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.18444
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace UmecaApp
{
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;


[System.CodeDom.Compiler.GeneratedCodeAttribute("RazorTemplatePreprocessor", "2.6.0.0")]
public partial class DrugUpsert : WebViewTemplate
{

#line hidden

#line 1 "DrugUpsert.cshtml"
public UmecaApp.ModelContainer Model { get; set; }

#line default
#line hidden


public override void Execute()
{

#line 3 "DrugUpsert.cshtml"
  
Layout = "UmecaApp.headUm";


#line default
#line hidden
WriteLiteral("\r\n<script>\r\napp.controller(\'DrugController\', function($scope, $timeout) {\r\n\t$scop" +
"e.m = {};\r\n\t$scope.d = {};\r\n    $scope.lstType = [];\r\n    $scope.lstPer = [];\r\n " +
"   $scope.d.type = {};\r\n    $scope.d.per = {};\r\n    $scope.MsgError = \"\";\r\n\r\n   " +
" $scope.init = function(){\r\n\t\t\tvar typeDrogas = MeetingService.findAllDrugType()" +
";\r\n\t\t    console.log(\"typeDrogas\"+typeDrogas);\r\n\t\t    $scope.lstType = JSON.pars" +
"e(typeDrogas);\r\n\t\t    var periodicidad = MeetingService.findAllPeriodicity();\r\n\t" +
"\t    console.log(\"periodicidad\"+periodicidad);\r\n\t\t    $scope.lstPer = JSON.parse" +
"(periodicidad);\r\n\t\t    try{\r\n\t\t    \tconsole.log(\"modelContainer\"+$(\"#hdnJsonMode" +
"lContainer\").val());\r\n\t\t    \tvar js = JSON.parse($(\"#hdnJsonModelContainer\").val" +
"());\r\n\t\t\t    $scope.m = js;\r\n\t\t\t} catch(err){\r\n\t\t    \talert(\"Init erro==>\"+err.m" +
"essage);\r\n\t\t    }\r\n\r\n\t\t    if($scope.m.block == undefined ||$scope.m.block == nu" +
"ll || $scope.m.block == false ){\r\n\t\t    \t$scope.m.block=false;\r\n\t\t    \t$scope.fi" +
"llModel();\r\n\t\t    }\r\n\t\t    else{\r\n\t\t    \t$scope.m.block = true;\r\n\t\t    }\r\n\t\t    " +
"if($scope.m.DrugTypeId!=undefined){\r\n\t\t    \tfor(var i= 0; i < $scope.lstType.len" +
"gth ; i++){\r\n\t                if($scope.lstType[i].Id == $scope.m.DrugTypeId){\r\n" +
"\t    \t\t\t\t$scope.d.type = $scope.lstType[i];\r\n\t                    break;\r\n\t     " +
"           }\r\n\t            }\r\n\t\t    }\r\n\t\t    if($scope.m.PeriodicityId!=undefine" +
"d){\r\n\t\t    \tfor(var i= 0; i < $scope.lstPer.length ; i++){\r\n\t                if(" +
"$scope.lstPer[i].Id == $scope.m.PeriodicityId){\r\n\t    \t\t\t\t$scope.d.per = $scope." +
"lstPer[i];\r\n\t                    break;\r\n\t                }\r\n\t            }\r\n\t\t " +
"   }\r\n\t\t    //fecha\r\n\t\tvar today  = new Date();\r\n        var year = today.getFul" +
"lYear();\r\n        var month = today.getMonth();\r\n        var date = today.getDat" +
"e();\r\n\r\n        if($scope.m.LastUse == \"\" || $scope.m.LastUse == undefined){\r\n  " +
"          $scope.m.LastUse = year+\"/\"+(month+1)+\"/\"+date;\r\n        }\r\n        $s" +
"cope.m.LastUse= $scope.m.LastUse.replace(/-/g,\"/\");\r\n        $scope.m.LastUse = " +
"$scope.m.LastUse.replace(\"T00:00:00\",\"\");\r\n    };\r\n\r\n    $timeout(function() {\r\n" +
"        $scope.init();\r\n    }, 0);\r\n\r\n    $scope.save = function(){\r\n    if($(\"#" +
"FormDrugId\").valid() == false){\r\n         return false;\r\n    }else{\r\n    console" +
".log(\"save\"+$(\"#hdnMeetingCaseReference\").val());\r\n\t   \t\tvar jsonData = JSON.str" +
"ingify($scope.m);\r\n\t\t\t$scope.msgError = MeetingService.upsertDrug(JSON.stringify" +
"($scope.m));\r\n\t\t\tif($scope.msgError==undefined||$scope.msgError==null||$scope.ms" +
"gError==\"\"){\r\n\t\t\t\t$scope.cancel($(\"#hdnMeetingCaseReference\").val());\r\n\t\t\t}\r\n\t}\r" +
"\n\t   };\r\n\r\n    $scope.cancel = function (idCase) {\r\n    console.log(\"cancel\"+idC" +
"ase);\r\n        window.location.replace(\'hybrid:Meeting/MeetingDatosPersonales?id" +
"Case=\'+idCase);\r\n    };\r\n\r\n    $scope.fillModel = function(){\r\n    var template " +
"=\"NO CONSUME\";\r\n        if($scope.m.block == false){\r\n            $scope.m.Onset" +
"Age =0;\r\n            //$scope.d.other=template;\r\n            //$scope.d.specific" +
"ationPeriodicity = template;\r\n            $scope.m.Quantity = template;\r\n       " +
" var today  = new Date();\r\n        var year = today.getFullYear();\r\n        var " +
"month = today.getMonth();\r\n        var date = today.getDate();\r\n        $scope.m" +
".LastUse = year+\"/\"+(month+1)+\"/\"+date;\r\n        $scope.m.LastUse= $scope.m.Last" +
"Use.replace(/-/g,\"/\");\r\n        $scope.m.LastUse = $scope.m.LastUse.replace(\"T00" +
":00:00\",\"\");\r\n            for(var i=0; i < $scope.lstType.length; i++){\r\n       " +
"         var type = $scope.lstType[i];\r\n                 if(type.Name === \"No co" +
"nsume\"){\r\n                    $scope.d.type = type;\r\n                    $scope." +
"m.DrugTypeId = type.Id;\r\n                    break;\r\n                }\r\n        " +
"    }\r\n            for(var i=0; i < $scope.lstPer.length; i++){\r\n               " +
" var per = $scope.lstPer[i];\r\n                if(per.Name == \"No consume\"){\r\n   " +
"                 $scope.d.per = per;\r\n                    $scope.m.PeriodicityId" +
" = per.Id;\r\n                    break;\r\n                }\r\n            }\r\n      " +
"  }else{\r\n            $scope.m.SpecificationPeriodicity = \"\";\r\n            $scop" +
"e.m.Quantity = \"\";\r\n            $scope.m.OnsetAge =\"\";\r\n\r\n        var today  = n" +
"ew Date();\r\n        var year = today.getFullYear();\r\n        var month = today.g" +
"etMonth();\r\n        var date = today.getDate();\r\n        $scope.m.LastUse = year" +
"+\"/\"+(month+1)+\"/\"+date;\r\n        $scope.m.LastUse= $scope.m.LastUse.replace(/-/" +
"g,\"/\");\r\n        $scope.m.LastUse = $scope.m.LastUse.replace(\"T00:00:00\",\"\");\r\n " +
"       }\r\n    };\r\n});\r\n</script>\r\n<div");

WriteLiteral(" id=\"dlgUpModalId\"");

WriteLiteral(" ng-app=\"umecaMobile\"");

WriteLiteral(" ng-controller=\"DrugController\"");

WriteLiteral(" >\r\n    <div>\r\n        <div");

WriteLiteral(" class=\"alert alert-info \"");

WriteLiteral(">\r\n            <button");

WriteLiteral(" type=\"button\"");

WriteLiteral(" class=\"close\"");

WriteLiteral(" data-dismiss=\"modal\"");

WriteLiteral(" aria-hidden=\"true\"");

WriteLiteral(">&times;</button>\r\n            <h4");

WriteLiteral(" class=\"element-center\"");

WriteLiteral("><i");

WriteLiteral(" class=\"icon-group \"");

WriteLiteral("></i>&nbsp;&nbsp;Consumo de sustancias</h4>\r\n        </div>\r\n    </div>\r\n        " +
"   \r\n\t<div>\r\n\t\t<div>\r\n\t\t    <input");

WriteLiteral(" id=\"hdnJsonModelContainer\"");

WriteLiteral(" type=\"hidden\"");

WriteAttribute ("value", " value=\"", "\""

#line 145 "DrugUpsert.cshtml"
                            , Tuple.Create<string,object,bool> ("", Model.JsonModel

#line default
#line hidden
, false)
);
WriteLiteral(" name=\"jsonString\"");

WriteLiteral(" />\r\n\t\t    <input");

WriteLiteral(" id=\"hdnMeetingCaseReference\"");

WriteLiteral(" type=\"hidden\"");

WriteAttribute ("value", " value=\"", "\""

#line 146 "DrugUpsert.cshtml"
                              , Tuple.Create<string,object,bool> ("", Model.Reference

#line default
#line hidden
, false)
);
WriteLiteral(" name=\"wasd\"");

WriteLiteral("/>\r\n\t\t</div>\r\n\t\t<form");

WriteLiteral(" id=\"FormDrugId\"");

WriteLiteral(" name=\"FormDrugId\"");

WriteLiteral(" >\r\n\t    <div");

WriteLiteral(" class=\"row\"");

WriteLiteral(">\r\n\t        <div");

WriteLiteral(" class=\"col-xs-12 element-center\"");

WriteLiteral(">\r\n\t            <div");

WriteLiteral(" class=\"col-xs-6 element-right\"");

WriteLiteral(" >\r\n\t                &iquest;El imputado consume sustancias actualmente?\r\n\t      " +
"      </div>\r\n\t            <div");

WriteLiteral(" class=\"col-xs-2\"");

WriteLiteral(">\r\n\t                <input");

WriteLiteral(" type=\"radio\"");

WriteLiteral(" name=\"block\"");

WriteLiteral("\r\n\t                       id=\"blockYes\"");

WriteLiteral(" ng-value=\"true\"");

WriteLiteral(" ng-model=\"m.block\"");

WriteLiteral(" ng-change=\"fillModel()\"");

WriteLiteral(">\r\n\t                <label");

WriteLiteral(" for=\"blockYes\"");

WriteLiteral(">Si</label> &nbsp;&nbsp;&nbsp;\r\n\t                <input");

WriteLiteral(" type=\"radio\"");

WriteLiteral("  name=\"block\"");

WriteLiteral("\r\n\t                       id=\"blockNo\"");

WriteLiteral(" ng-value=\"false\"");

WriteLiteral(" ng-model=\"m.block\"");

WriteLiteral(" ng-change=\"fillModel()\"");

WriteLiteral(">\r\n\t                <label");

WriteLiteral(" for=\"blockNo\"");

WriteLiteral(">No</label>\r\n\t            </div>\r\n\t        </div>\r\n\t    </div>\r\n\t    <!--inicio c" +
"ontent drug-->\r\n<script");

WriteLiteral(" src=\"${pageContext.request.contextPath}/assets/scripts/app/shared/dateTimePicker" +
"Cursor.js\"");

WriteLiteral("></script>\r\n<div");

WriteLiteral(" class=\"row\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" class=\"col-xs-2\"");

WriteLiteral(">\r\n        Sustancia:\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"col-xs-4\"");

WriteLiteral(">\r\n        <select");

WriteLiteral(" class=\"form-control element-center\"");

WriteLiteral(" ng-model=\"d.type\"");

WriteLiteral("\r\n                ng-options=\"e.Name for e in lstType\"");

WriteLiteral("\r\n                ng-change=\"m.DrugTypeId = d.type[\'Id\']\"");

WriteLiteral("  ng-disabled=\"!m.block\"");

WriteLiteral("></select>\r\n\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"col-xs-2\"");

WriteLiteral(">\r\n        Periodicidad:\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"col-xs-4\"");

WriteLiteral(">\r\n        <select");

WriteLiteral(" class=\"form-control element-center\"");

WriteLiteral(" ng-model=\"d.per\"");

WriteLiteral("\r\n                ng-options=\"e.Name for e in lstPer\"");

WriteLiteral("\r\n                ng-change=\"m.PeriodicityId = d.per[\'Id\']\"");

WriteLiteral("   ng-disabled=\"!m.block\"");

WriteLiteral("\r\n                ></select>\r\n    </div>\r\n</div>\r\n<br/>\r\n<div");

WriteLiteral(" class=\"row\"");

WriteLiteral(" ng-show=\"d.type.[\'Specification\']\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" class=\"col-xs-2\"");

WriteLiteral(" ng-show=\"d.type.[\'Specification\']\"");

WriteLiteral(" >\r\n        Especif&iacute;que sustancia:\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"col-xs-4\"");

WriteLiteral(" ng-show=\"d.type[\'Specification\']\"");

WriteLiteral(">\r\n        <input");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" data-val=\"true\"");

WriteLiteral(" data-val-length=\"Debe tener al menos 3 y m&aacute;ximo 100 caracteres\"");

WriteLiteral("  ng-readonly=\"!m.block\"");

WriteLiteral("\r\n               data-val-length-max=\"100\"");

WriteLiteral(" data-val-length-min=\"3\"");

WriteLiteral(" data-val-required=\"La especificaci&oacute;n es un campo requerido\"");

WriteLiteral("\r\n               type=\"text\"");

WriteLiteral(" value=\"\"");

WriteLiteral(" ng-model=\"m.Specification\"");

WriteLiteral(" \r\n               id=\"specificationType\"");

WriteLiteral(" name=\"specificationType\"");

WriteLiteral(">\r\n        <br/>\r\n        <span");

WriteLiteral(" class=\"field-validation-valid\"");

WriteLiteral(" data-valmsg-for=\"specificationType\"");

WriteLiteral(" data-valmsg-replace=\"true\"");

WriteLiteral("></span>\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"col-xs-2\"");

WriteLiteral("   ng-show=\"d.per[\'Specification\']\"");

WriteLiteral(">\r\n        Especif&iacute;que periodicidad:\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"col-xs-4\"");

WriteLiteral(" ng-show=\"d.per[\'Specification\']\"");

WriteLiteral(">\r\n        <input");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" data-val=\"true\"");

WriteLiteral(" data-val-length=\"Debe tener al menos 3 y m&aacute;ximo 100 caracteres\"");

WriteLiteral("    ng-readonly=\"!m.block\"");

WriteLiteral("\r\n               data-val-length-max=\"100\"");

WriteLiteral(" data-val-length-min=\"3\"");

WriteLiteral(" data-val-required=\"La especificaci&oacute;n es un campo requerido\"");

WriteLiteral("\r\n               type=\"text\"");

WriteLiteral(" value=\"\"");

WriteLiteral(" ng-model=\"m.SpecificationPeriodicity\"");

WriteLiteral(" \r\n               id=\"specificationPeriodicity\"");

WriteLiteral(" name=\"specificationPeriodicity\"");

WriteLiteral(">\r\n        <br/>\r\n        <span");

WriteLiteral(" class=\"field-validation-valid\"");

WriteLiteral(" data-valmsg-for=\"specificationPeriodicity\"");

WriteLiteral(" data-valmsg-replace=\"true\"");

WriteLiteral("></span>\r\n    </div>\r\n</div>\r\n<br/>\r\n<div");

WriteLiteral(" class=\"row\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" class=\"col-xs-2\"");

WriteLiteral(">\r\n        Cantidad:\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"col-xs-4\"");

WriteLiteral(">\r\n        <input");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" data-val=\"true\"");

WriteLiteral(" data-val-length=\"Debe tener al menos 2 y m&aacute;ximo 25 caracteres\"");

WriteLiteral("\r\n               data-val-length-max=\"25\"");

WriteLiteral(" data-val-length-min=\"2\"");

WriteLiteral(" data-val-required=\"La cantidad es un campo requerido\"");

WriteLiteral("  ng-readonly=\"!m.block\"");

WriteLiteral("\r\n               type=\"text\"");

WriteLiteral("  ng-model=\"m.Quantity\"");

WriteLiteral(" name=\"quantity\"");

WriteLiteral(" id=\"quantity\"");

WriteLiteral(">\r\n        <br/>\r\n        <span");

WriteLiteral(" class=\"field-validation-valid\"");

WriteLiteral(" data-valmsg-for=\"quantity\"");

WriteLiteral(" data-valmsg-replace=\"true\"");

WriteLiteral("></span>\r\n    </div>\r\n\r\n    <div");

WriteLiteral(" class=\"col-xs-2\"");

WriteLiteral(">\r\n        &Uacute;ltimo consumo:\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"col-xs-4\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"input-group\"");

WriteLiteral(">\r\n            <input");

WriteLiteral(" class=\"form-control date-picker\"");

WriteLiteral(" id=\"lastUse\"");

WriteLiteral(" data-val=\"true\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" data-date-format=\"yyyy/mm/dd\"");

WriteLiteral(" \r\n                   name=\"lastUse\"");

WriteLiteral(" data-val-required=\"La &uacute;ltima fecha de consumo es un campo requerido\"");

WriteLiteral(" ng-model=\"m.LastUse\"");

WriteLiteral("/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span");

WriteLiteral(" class=\"input-group-addon\"");

WriteLiteral(">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i");

WriteLiteral(" class=\"icon-calendar bigger-110\"");

WriteLiteral("></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n        </div>\r\n        <br/>\r\n        <span");

WriteLiteral(" class=\"field-validation-valid\"");

WriteLiteral(" data-valmsg-for=\"lastUse\"");

WriteLiteral(" data-valmsg-replace=\"true\"");

WriteLiteral("></span>\r\n    </div>\r\n</div>\r\n<div");

WriteLiteral(" class=\"row\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" class=\"col-xs-2\"");

WriteLiteral(">\r\n        Edad de inicio:\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"col-xs-4\"");

WriteLiteral(">\r\n        <input");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" data-val=\"true\"");

WriteLiteral(" data-val-length=\"Debe tener al menos 1 y m&aacute;ximo 25 caracteres\"");

WriteLiteral("\r\n               data-val-length-max=\"25\"");

WriteLiteral(" data-val-length-min=\"1\"");

WriteLiteral(" data-val-required=\"La edad de inicio es un campo requerido\"");

WriteLiteral("  ng-readonly=\"!m.block\"");

WriteLiteral("\r\n               type=\"text\"");

WriteLiteral("  ng-model=\"m.OnsetAge\"");

WriteLiteral(" name=\"onsetAge\"");

WriteLiteral(" id=\"onsetAge\"");

WriteLiteral(">\r\n        <br/>\r\n        <span");

WriteLiteral(" class=\"field-validation-valid\"");

WriteLiteral(" data-valmsg-for=\"onsetAge\"");

WriteLiteral(" data-valmsg-replace=\"true\"");

WriteLiteral("></span>\r\n    </div>\r\n</div>\r\n\r\n\t    <!--fin content drug-->\r\n        <br />\r\n   " +
"     <div");

WriteLiteral(" class=\"row\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" class=\"col-xs-12\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" ng-show=\"MsgError\"");

WriteLiteral(" class=\"alert alert-danger element-center\"");

WriteLiteral(">\r\n                    {{MsgError}}\r\n                </div>\r\n            </div>\r\n" +
"        </div>\r\n        <div");

WriteLiteral(" class=\"modal-footer\"");

WriteLiteral(">\r\n            <span");

WriteLiteral(" class=\"btn btn-default btn-sm\"");

WriteAttribute ("ng-click", "  ng-click=\"", "\""
, Tuple.Create<string,object,bool> ("", "cancel(\'", true)

#line 262 "DrugUpsert.cshtml"
                             , Tuple.Create<string,object,bool> ("", Model.Reference

#line default
#line hidden
, false)
, Tuple.Create<string,object,bool> ("", "\')", true)
);
WriteLiteral(">\r\n                Cancelar\r\n            </span>\r\n            <span");

WriteLiteral(" class=\"btn btn-default btn-primary btn-sm\"");

WriteLiteral("\r\n                   ng-click=\"save();\"");

WriteLiteral(@">
                  Guardar
            </span>
        </div>
        </form>
	</div>
</div>

<script>
    $('.date-picker').datepicker({autoclose:true, endDate:new Date()}).next().on(ace.click_event, function(){
        $(this).prev().focus();
    });
</script>");

}
}
}
#pragma warning restore 1591
